name: CI/CD Pipeline (Self-Hosted Runner)

on: [push]

jobs:
  build:
    runs-on: self-hosted
    steps:
      - uses: actions/checkout@v4
      - name: Run build
        shell: cmd
        run: |
          echo "Этап BUILD выполняется на ВАШЕМ компьютере (self-hosted runner)"
          echo "Текущая директория: %CD%"
          dir

  test:
    runs-on: self-hosted
    needs: build
    steps:
      - uses: actions/checkout@v4
      - name: Run tests
        shell: cmd
        run: |
          echo "Этап TEST выполняется на ВАШЕМ компьютере"
          python --version 2>nul || (echo "Python не установлен" && exit 0)
          echo "Симуляция тестов..."

  deploy:
    runs-on: ubuntu-latest
    needs: test
    steps:
      - uses: actions/checkout@v4
      - name: Deploy to staging
        run: echo "Этап DEPLOY выполняется на облачном раннере GitHub"
